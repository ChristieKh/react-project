const React = require('react');

const importJsx = require('import-jsx');

const {
  Static,
  Box
} = require('ink');

const {
  STATUS_NOT_STARTED,
  STATUS_RUNNING,
  STATUS_SUCCEEDED,
  STATUS_FAILED
} = require('../../task-runner');

const {
  TASK_TYPE_PREPARE,
  TASK_TYPE_START,
  TASK_TYPE_FETCH_STORIES,
  TASK_TYPE_TESTS,
  TASK_TYPE_TEST,
  TASK_TYPE_STOP
} = require('../../constants');

const Task = importJsx('./Task');
const FailedTest = importJsx('./FailedTest');

const collectRecursively = (predicate, tasks, collection = []) => {
  for (let i = 0; i < tasks.length; i++) {
    const task = tasks[i];

    if (predicate(task)) {
      collection.push(task);
    }

    if (task.tasks) {
      return collectRecursively(predicate, task.tasks, collection);
    }
  }

  return collection;
};

const isRunningTest = task => task.status === STATUS_RUNNING && task.meta.type === TASK_TYPE_TEST;

const isCompletedTest = task => (task.status === STATUS_FAILED || task.status === STATUS_SUCCEEDED) && task.meta.type === TASK_TYPE_TEST;

const isFailedTest = task => task.status === STATUS_FAILED && task.meta.type === TASK_TYPE_TEST;

const isFailedTask = task => task.status === STATUS_FAILED && task.meta.type !== TASK_TYPE_TESTS;

const groupByKind = testTasks => testTasks.reduce((acc, task) => {
  const key = `${task.meta.target}/${task.meta.configuration}/${task.meta.kind}`;

  if (!acc[key]) {
    acc[key] = {
      target: task.meta.target,
      configuration: task.meta.configuration,
      kind: task.meta.kind,
      tasks: []
    };
  }

  acc[key].tasks.push(task);
  return acc;
}, {});

const KindTask = ({
  status,
  target,
  configuration,
  kind
}) => /*#__PURE__*/React.createElement(Task, {
  status: status,
  prefix: `${target}/${configuration}/`,
  title: kind
});

const TARGET_TASK_TITLE_MAP = {
  [TASK_TYPE_PREPARE]: 'Preparing',
  [TASK_TYPE_START]: 'Starting',
  [TASK_TYPE_FETCH_STORIES]: 'Fetching stories',
  [TASK_TYPE_TESTS]: 'Running tests',
  [TASK_TYPE_STOP]: 'Stopping'
};

const TargetTask = ({
  status,
  target,
  tasks
}) => {
  const currentTask = tasks && tasks.find(task => task.status === STATUS_NOT_STARTED || task.status === STATUS_RUNNING);
  const taskTitle = currentTask && TARGET_TASK_TITLE_MAP[currentTask.meta.type];
  const failedTasks = (tasks || []).filter(isFailedTask);
  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Task, {
    status: status,
    title: `${target}${status !== STATUS_FAILED && taskTitle ? `: ${taskTitle}` : ''}`
  }), failedTasks.map(task => /*#__PURE__*/React.createElement(FailedTest, {
    key: task.id,
    title: TARGET_TASK_TITLE_MAP[task.meta.type],
    error: task.error
  })));
};

const renderFailedTasks = tasks => tasks.filter(isFailedTest).map(task => /*#__PURE__*/React.createElement(FailedTest, {
  key: task.id,
  title: task.meta.story,
  error: task.error
}));

const renderKind = ({
  key,
  status,
  target,
  configuration,
  kind,
  tasks
}) => /*#__PURE__*/React.createElement(React.Fragment, {
  key: key
}, /*#__PURE__*/React.createElement(KindTask, {
  status: status,
  target: target,
  configuration: configuration,
  kind: kind
}), renderFailedTasks(tasks));

const renderKinds = kinds => kinds.map(renderKind);

const TaskList = ({
  tasks
}) => {
  const runningGrouped = groupByKind(collectRecursively(isRunningTest, tasks));
  const running = Object.keys(runningGrouped).map(key => ({
    key,
    ...runningGrouped[key],
    status: STATUS_RUNNING
  }));
  const completedGrouped = groupByKind(collectRecursively(isCompletedTest, tasks));
  const completed = Object.keys(completedGrouped).filter(key => !runningGrouped[key]).map(key => ({
    key,
    ...completedGrouped[key],
    status: completedGrouped[key].tasks.find(test => test.status === STATUS_FAILED) ? STATUS_FAILED : STATUS_SUCCEEDED,
    completedAt: completedGrouped[key].tasks.reduce((acc, task) => Math.max(acc, task.completedAt), 0)
  })).sort((a, b) => a.completedAt - b.completedAt);
  return /*#__PURE__*/React.createElement(Box, {
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Static, {
    items: completed
  }, renderKind), renderKinds(running), tasks.map(task => /*#__PURE__*/React.createElement(TargetTask, {
    key: task.id,
    status: task.status,
    target: task.id,
    tasks: task.tasks
  })));
};

module.exports = TaskList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJpbXBvcnRKc3giLCJTdGF0aWMiLCJCb3giLCJTVEFUVVNfTk9UX1NUQVJURUQiLCJTVEFUVVNfUlVOTklORyIsIlNUQVRVU19TVUNDRUVERUQiLCJTVEFUVVNfRkFJTEVEIiwiVEFTS19UWVBFX1BSRVBBUkUiLCJUQVNLX1RZUEVfU1RBUlQiLCJUQVNLX1RZUEVfRkVUQ0hfU1RPUklFUyIsIlRBU0tfVFlQRV9URVNUUyIsIlRBU0tfVFlQRV9URVNUIiwiVEFTS19UWVBFX1NUT1AiLCJUYXNrIiwiRmFpbGVkVGVzdCIsImNvbGxlY3RSZWN1cnNpdmVseSIsInByZWRpY2F0ZSIsInRhc2tzIiwiY29sbGVjdGlvbiIsImkiLCJsZW5ndGgiLCJ0YXNrIiwicHVzaCIsImlzUnVubmluZ1Rlc3QiLCJzdGF0dXMiLCJtZXRhIiwidHlwZSIsImlzQ29tcGxldGVkVGVzdCIsImlzRmFpbGVkVGVzdCIsImlzRmFpbGVkVGFzayIsImdyb3VwQnlLaW5kIiwidGVzdFRhc2tzIiwicmVkdWNlIiwiYWNjIiwia2V5IiwidGFyZ2V0IiwiY29uZmlndXJhdGlvbiIsImtpbmQiLCJLaW5kVGFzayIsIlRBUkdFVF9UQVNLX1RJVExFX01BUCIsIlRhcmdldFRhc2siLCJjdXJyZW50VGFzayIsImZpbmQiLCJ0YXNrVGl0bGUiLCJmYWlsZWRUYXNrcyIsImZpbHRlciIsIm1hcCIsImlkIiwiZXJyb3IiLCJyZW5kZXJGYWlsZWRUYXNrcyIsInN0b3J5IiwicmVuZGVyS2luZCIsInJlbmRlcktpbmRzIiwia2luZHMiLCJUYXNrTGlzdCIsInJ1bm5pbmdHcm91cGVkIiwicnVubmluZyIsIk9iamVjdCIsImtleXMiLCJjb21wbGV0ZWRHcm91cGVkIiwiY29tcGxldGVkIiwidGVzdCIsImNvbXBsZXRlZEF0IiwiTWF0aCIsIm1heCIsInNvcnQiLCJhIiwiYiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJUYXNrTGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBpbXBvcnRKc3ggPSByZXF1aXJlKCdpbXBvcnQtanN4Jyk7XG5jb25zdCB7IFN0YXRpYywgQm94IH0gPSByZXF1aXJlKCdpbmsnKTtcbmNvbnN0IHtcbiAgU1RBVFVTX05PVF9TVEFSVEVELFxuICBTVEFUVVNfUlVOTklORyxcbiAgU1RBVFVTX1NVQ0NFRURFRCxcbiAgU1RBVFVTX0ZBSUxFRCxcbn0gPSByZXF1aXJlKCcuLi8uLi90YXNrLXJ1bm5lcicpO1xuY29uc3Qge1xuICBUQVNLX1RZUEVfUFJFUEFSRSxcbiAgVEFTS19UWVBFX1NUQVJULFxuICBUQVNLX1RZUEVfRkVUQ0hfU1RPUklFUyxcbiAgVEFTS19UWVBFX1RFU1RTLFxuICBUQVNLX1RZUEVfVEVTVCxcbiAgVEFTS19UWVBFX1NUT1AsXG59ID0gcmVxdWlyZSgnLi4vLi4vY29uc3RhbnRzJyk7XG5cbmNvbnN0IFRhc2sgPSBpbXBvcnRKc3goJy4vVGFzaycpO1xuY29uc3QgRmFpbGVkVGVzdCA9IGltcG9ydEpzeCgnLi9GYWlsZWRUZXN0Jyk7XG5cbmNvbnN0IGNvbGxlY3RSZWN1cnNpdmVseSA9IChwcmVkaWNhdGUsIHRhc2tzLCBjb2xsZWN0aW9uID0gW10pID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHRhc2sgPSB0YXNrc1tpXTtcbiAgICBpZiAocHJlZGljYXRlKHRhc2spKSB7XG4gICAgICBjb2xsZWN0aW9uLnB1c2godGFzayk7XG4gICAgfVxuICAgIGlmICh0YXNrLnRhc2tzKSB7XG4gICAgICByZXR1cm4gY29sbGVjdFJlY3Vyc2l2ZWx5KHByZWRpY2F0ZSwgdGFzay50YXNrcywgY29sbGVjdGlvbik7XG4gICAgfVxuICB9XG4gIHJldHVybiBjb2xsZWN0aW9uO1xufTtcblxuY29uc3QgaXNSdW5uaW5nVGVzdCA9ICh0YXNrKSA9PlxuICB0YXNrLnN0YXR1cyA9PT0gU1RBVFVTX1JVTk5JTkcgJiYgdGFzay5tZXRhLnR5cGUgPT09IFRBU0tfVFlQRV9URVNUO1xuXG5jb25zdCBpc0NvbXBsZXRlZFRlc3QgPSAodGFzaykgPT5cbiAgKHRhc2suc3RhdHVzID09PSBTVEFUVVNfRkFJTEVEIHx8IHRhc2suc3RhdHVzID09PSBTVEFUVVNfU1VDQ0VFREVEKSAmJlxuICB0YXNrLm1ldGEudHlwZSA9PT0gVEFTS19UWVBFX1RFU1Q7XG5cbmNvbnN0IGlzRmFpbGVkVGVzdCA9ICh0YXNrKSA9PlxuICB0YXNrLnN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxFRCAmJiB0YXNrLm1ldGEudHlwZSA9PT0gVEFTS19UWVBFX1RFU1Q7XG5cbmNvbnN0IGlzRmFpbGVkVGFzayA9ICh0YXNrKSA9PlxuICB0YXNrLnN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxFRCAmJiB0YXNrLm1ldGEudHlwZSAhPT0gVEFTS19UWVBFX1RFU1RTO1xuXG5jb25zdCBncm91cEJ5S2luZCA9ICh0ZXN0VGFza3MpID0+XG4gIHRlc3RUYXNrcy5yZWR1Y2UoKGFjYywgdGFzaykgPT4ge1xuICAgIGNvbnN0IGtleSA9IGAke3Rhc2subWV0YS50YXJnZXR9LyR7dGFzay5tZXRhLmNvbmZpZ3VyYXRpb259LyR7dGFzay5tZXRhLmtpbmR9YDtcbiAgICBpZiAoIWFjY1trZXldKSB7XG4gICAgICBhY2Nba2V5XSA9IHtcbiAgICAgICAgdGFyZ2V0OiB0YXNrLm1ldGEudGFyZ2V0LFxuICAgICAgICBjb25maWd1cmF0aW9uOiB0YXNrLm1ldGEuY29uZmlndXJhdGlvbixcbiAgICAgICAga2luZDogdGFzay5tZXRhLmtpbmQsXG4gICAgICAgIHRhc2tzOiBbXSxcbiAgICAgIH07XG4gICAgfVxuICAgIGFjY1trZXldLnRhc2tzLnB1c2godGFzayk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuXG5jb25zdCBLaW5kVGFzayA9ICh7IHN0YXR1cywgdGFyZ2V0LCBjb25maWd1cmF0aW9uLCBraW5kIH0pID0+IChcbiAgPFRhc2sgc3RhdHVzPXtzdGF0dXN9IHByZWZpeD17YCR7dGFyZ2V0fS8ke2NvbmZpZ3VyYXRpb259L2B9IHRpdGxlPXtraW5kfSAvPlxuKTtcblxuY29uc3QgVEFSR0VUX1RBU0tfVElUTEVfTUFQID0ge1xuICBbVEFTS19UWVBFX1BSRVBBUkVdOiAnUHJlcGFyaW5nJyxcbiAgW1RBU0tfVFlQRV9TVEFSVF06ICdTdGFydGluZycsXG4gIFtUQVNLX1RZUEVfRkVUQ0hfU1RPUklFU106ICdGZXRjaGluZyBzdG9yaWVzJyxcbiAgW1RBU0tfVFlQRV9URVNUU106ICdSdW5uaW5nIHRlc3RzJyxcbiAgW1RBU0tfVFlQRV9TVE9QXTogJ1N0b3BwaW5nJyxcbn07XG5jb25zdCBUYXJnZXRUYXNrID0gKHsgc3RhdHVzLCB0YXJnZXQsIHRhc2tzIH0pID0+IHtcbiAgY29uc3QgY3VycmVudFRhc2sgPVxuICAgIHRhc2tzICYmXG4gICAgdGFza3MuZmluZChcbiAgICAgICh0YXNrKSA9PlxuICAgICAgICB0YXNrLnN0YXR1cyA9PT0gU1RBVFVTX05PVF9TVEFSVEVEIHx8IHRhc2suc3RhdHVzID09PSBTVEFUVVNfUlVOTklOR1xuICAgICk7XG4gIGNvbnN0IHRhc2tUaXRsZSA9IGN1cnJlbnRUYXNrICYmIFRBUkdFVF9UQVNLX1RJVExFX01BUFtjdXJyZW50VGFzay5tZXRhLnR5cGVdO1xuICBjb25zdCBmYWlsZWRUYXNrcyA9ICh0YXNrcyB8fCBbXSkuZmlsdGVyKGlzRmFpbGVkVGFzayk7XG5cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICA8VGFza1xuICAgICAgICBzdGF0dXM9e3N0YXR1c31cbiAgICAgICAgdGl0bGU9e2Ake3RhcmdldH0ke1xuICAgICAgICAgIHN0YXR1cyAhPT0gU1RBVFVTX0ZBSUxFRCAmJiB0YXNrVGl0bGUgPyBgOiAke3Rhc2tUaXRsZX1gIDogJydcbiAgICAgICAgfWB9XG4gICAgICAvPlxuICAgICAge2ZhaWxlZFRhc2tzLm1hcCgodGFzaykgPT4gKFxuICAgICAgICA8RmFpbGVkVGVzdFxuICAgICAgICAgIGtleT17dGFzay5pZH1cbiAgICAgICAgICB0aXRsZT17VEFSR0VUX1RBU0tfVElUTEVfTUFQW3Rhc2subWV0YS50eXBlXX1cbiAgICAgICAgICBlcnJvcj17dGFzay5lcnJvcn1cbiAgICAgICAgLz5cbiAgICAgICkpfVxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICk7XG59O1xuXG5jb25zdCByZW5kZXJGYWlsZWRUYXNrcyA9ICh0YXNrcykgPT5cbiAgdGFza3NcbiAgICAuZmlsdGVyKGlzRmFpbGVkVGVzdClcbiAgICAubWFwKCh0YXNrKSA9PiAoXG4gICAgICA8RmFpbGVkVGVzdCBrZXk9e3Rhc2suaWR9IHRpdGxlPXt0YXNrLm1ldGEuc3Rvcnl9IGVycm9yPXt0YXNrLmVycm9yfSAvPlxuICAgICkpO1xuXG5jb25zdCByZW5kZXJLaW5kID0gKHsga2V5LCBzdGF0dXMsIHRhcmdldCwgY29uZmlndXJhdGlvbiwga2luZCwgdGFza3MgfSkgPT4gKFxuICA8UmVhY3QuRnJhZ21lbnQga2V5PXtrZXl9PlxuICAgIDxLaW5kVGFza1xuICAgICAgc3RhdHVzPXtzdGF0dXN9XG4gICAgICB0YXJnZXQ9e3RhcmdldH1cbiAgICAgIGNvbmZpZ3VyYXRpb249e2NvbmZpZ3VyYXRpb259XG4gICAgICBraW5kPXtraW5kfVxuICAgIC8+XG4gICAge3JlbmRlckZhaWxlZFRhc2tzKHRhc2tzKX1cbiAgPC9SZWFjdC5GcmFnbWVudD5cbik7XG5cbmNvbnN0IHJlbmRlcktpbmRzID0gKGtpbmRzKSA9PiBraW5kcy5tYXAocmVuZGVyS2luZCk7XG5cbmNvbnN0IFRhc2tMaXN0ID0gKHsgdGFza3MgfSkgPT4ge1xuICBjb25zdCBydW5uaW5nR3JvdXBlZCA9IGdyb3VwQnlLaW5kKGNvbGxlY3RSZWN1cnNpdmVseShpc1J1bm5pbmdUZXN0LCB0YXNrcykpO1xuICBjb25zdCBydW5uaW5nID0gT2JqZWN0LmtleXMocnVubmluZ0dyb3VwZWQpLm1hcCgoa2V5KSA9PiAoe1xuICAgIGtleSxcbiAgICAuLi5ydW5uaW5nR3JvdXBlZFtrZXldLFxuICAgIHN0YXR1czogU1RBVFVTX1JVTk5JTkcsXG4gIH0pKTtcblxuICBjb25zdCBjb21wbGV0ZWRHcm91cGVkID0gZ3JvdXBCeUtpbmQoXG4gICAgY29sbGVjdFJlY3Vyc2l2ZWx5KGlzQ29tcGxldGVkVGVzdCwgdGFza3MpXG4gICk7XG4gIGNvbnN0IGNvbXBsZXRlZCA9IE9iamVjdC5rZXlzKGNvbXBsZXRlZEdyb3VwZWQpXG4gICAgLmZpbHRlcigoa2V5KSA9PiAhcnVubmluZ0dyb3VwZWRba2V5XSlcbiAgICAubWFwKChrZXkpID0+ICh7XG4gICAgICBrZXksXG4gICAgICAuLi5jb21wbGV0ZWRHcm91cGVkW2tleV0sXG4gICAgICBzdGF0dXM6IGNvbXBsZXRlZEdyb3VwZWRba2V5XS50YXNrcy5maW5kKFxuICAgICAgICAodGVzdCkgPT4gdGVzdC5zdGF0dXMgPT09IFNUQVRVU19GQUlMRURcbiAgICAgIClcbiAgICAgICAgPyBTVEFUVVNfRkFJTEVEXG4gICAgICAgIDogU1RBVFVTX1NVQ0NFRURFRCxcbiAgICAgIGNvbXBsZXRlZEF0OiBjb21wbGV0ZWRHcm91cGVkW2tleV0udGFza3MucmVkdWNlKFxuICAgICAgICAoYWNjLCB0YXNrKSA9PiBNYXRoLm1heChhY2MsIHRhc2suY29tcGxldGVkQXQpLFxuICAgICAgICAwXG4gICAgICApLFxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLmNvbXBsZXRlZEF0IC0gYi5jb21wbGV0ZWRBdCk7XG5cbiAgcmV0dXJuIChcbiAgICA8Qm94IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIj5cbiAgICAgIDxTdGF0aWMgaXRlbXM9e2NvbXBsZXRlZH0+e3JlbmRlcktpbmR9PC9TdGF0aWM+XG4gICAgICB7cmVuZGVyS2luZHMocnVubmluZyl9XG4gICAgICB7dGFza3MubWFwKCh0YXNrKSA9PiAoXG4gICAgICAgIDxUYXJnZXRUYXNrXG4gICAgICAgICAga2V5PXt0YXNrLmlkfVxuICAgICAgICAgIHN0YXR1cz17dGFzay5zdGF0dXN9XG4gICAgICAgICAgdGFyZ2V0PXt0YXNrLmlkfVxuICAgICAgICAgIHRhc2tzPXt0YXNrLnRhc2tzfVxuICAgICAgICAvPlxuICAgICAgKSl9XG4gICAgPC9Cb3g+XG4gICk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRhc2tMaXN0O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFDLFlBQUQsQ0FBekI7O0FBQ0EsTUFBTTtFQUFFRSxNQUFGO0VBQVVDO0FBQVYsSUFBa0JILE9BQU8sQ0FBQyxLQUFELENBQS9COztBQUNBLE1BQU07RUFDSkksa0JBREk7RUFFSkMsY0FGSTtFQUdKQyxnQkFISTtFQUlKQztBQUpJLElBS0ZQLE9BQU8sQ0FBQyxtQkFBRCxDQUxYOztBQU1BLE1BQU07RUFDSlEsaUJBREk7RUFFSkMsZUFGSTtFQUdKQyx1QkFISTtFQUlKQyxlQUpJO0VBS0pDLGNBTEk7RUFNSkM7QUFOSSxJQU9GYixPQUFPLENBQUMsaUJBQUQsQ0FQWDs7QUFTQSxNQUFNYyxJQUFJLEdBQUdiLFNBQVMsQ0FBQyxRQUFELENBQXRCO0FBQ0EsTUFBTWMsVUFBVSxHQUFHZCxTQUFTLENBQUMsY0FBRCxDQUE1Qjs7QUFFQSxNQUFNZSxrQkFBa0IsR0FBRyxDQUFDQyxTQUFELEVBQVlDLEtBQVosRUFBbUJDLFVBQVUsR0FBRyxFQUFoQyxLQUF1QztFQUNoRSxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdGLEtBQUssQ0FBQ0csTUFBMUIsRUFBa0NELENBQUMsRUFBbkMsRUFBdUM7SUFDckMsTUFBTUUsSUFBSSxHQUFHSixLQUFLLENBQUNFLENBQUQsQ0FBbEI7O0lBQ0EsSUFBSUgsU0FBUyxDQUFDSyxJQUFELENBQWIsRUFBcUI7TUFDbkJILFVBQVUsQ0FBQ0ksSUFBWCxDQUFnQkQsSUFBaEI7SUFDRDs7SUFD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